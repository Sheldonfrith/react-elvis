(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2344)}])},2344:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(5893),l=r(7294);let o=async(e,t)=>new Promise((r,n)=>{d(e,async()=>{throw Error("This is an example error")},1e3*t,r)}).catch(e=>{throw e}),s=async(e,t)=>new Promise((r,n)=>{d(e,async()=>{n(Error("This is an example error"))},1e3*t,r)}),a=async(e,t)=>new Promise((r,n)=>{d(e,async()=>{r({exampleData:"This is an example data object"})},1e3*t,r)}),i=async(e,t)=>(console.log("in cancelsItselfAfterASpecifiedAmountOfTime_Cancellable",e),new Promise((r,n)=>{console.log("in promise",e.signal,e),d(e,async()=>{e.abort()},1e3*t,r)}));function c(e,t){let{timeToComplete:r,completionType:n}=function(e){let t=e.timeToComplete.value,r=e.completionType.value;if(isNaN(Number(t)))throw Error(JSON.stringify({timeToComplete:"Please enter a valid number."}));if(1>Number(t))throw Error(JSON.stringify({timeToComplete:"Please enter a number greater than 0."}));if(Number(t)>60)throw Error(JSON.stringify({timeToComplete:"Please enter a number less than 60."}));if("success"!==r&&"incorrectly-thrown-error"!==r&&"correctly-thrown-error"!==r&&"self-cancel"!==r)throw Error(JSON.stringify({completionType:"Please enter a valid result type."}));return{timeToComplete:t,completionType:r}}(t);switch(n){case"success":return a(e,r);case"correctly-thrown-error":return s(e,r);case"incorrectly-thrown-error":return o(e,r);case"self-cancel":return i(e,r)}}function d(e,t,r,n){console.log("in abortableTimeout",e.signal);let l=setTimeout(t,r);e.signal.addEventListener("abort",()=>{clearTimeout(l),n("Operation aborted")},{once:!0})}var u=r(2405);let m={defaultError:{title:"Unknown Error With Test Function",message:"An unknown error occurred with the test function.",canIgnore:!1},loading:{title:"Running Test Function",message:"The test function is running."},definedErrors:[e=>{try{let t=JSON.parse(e.message);if(t&&"object"==typeof t){if(t.timeToComplete)return{title:"Error in 'Delay'",message:t.timeToComplete,canIgnore:!0,optionalMetadata:{inputField:"timeToComplete"}};if(t.completionType)return{title:"Error in 'Result Type'",message:t.completionType,canIgnore:!0,optionalMetadata:{inputField:"completionType"}}}}catch(e){return}},e=>{if(e instanceof Error&&"This is an example error"===e.message)return{title:"Intentional Error",message:"This is the error you chose to throw, for testing purposes.",canIgnore:!0}}]};var b=e=>{let{classNameOverride:t,onChangeOverride:r,children:l}=e;return(0,n.jsxs)("div",{className:"flex flex-row w-full justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:" p-2  whitespace-nowrap rounded-md text-white w-18 mr-16 text-lg",children:"Delay:"}),(0,n.jsx)("input",{className:t||"border border-black p-2 w-56 rounded-md text-black",onChange:r,id:"timeToComplete",name:"timeToComplete",type:"text",placeholder:"seconds"})]}),l]})},f=e=>{let{classNameOverride:t,onChangeOverride:r,children:l}=e;return(0,n.jsxs)("div",{className:"flex flex-row w-full mb-2",children:[(0,n.jsx)("label",{className:" p-2 pr-16 rounded-md text-white w-16 mr-14 whitespace-nowrap text-lg",children:"Result Type:"}),(0,n.jsxs)("select",{className:t||"border border-black  w-56 p-2 rounded-md text-black",id:"completionType",name:"completionType",onChange:r,children:[(0,n.jsx)("option",{value:"success",children:"Success"}),(0,n.jsx)("option",{value:"incorrectly-thrown-error",children:"Incorrectly Thrown Error"}),(0,n.jsx)("option",{value:"correctly-thrown-error",children:"Correctly Thrown Error"}),(0,n.jsx)("option",{value:"self-cancel",children:"Self Cancel"})]}),l]})};let h=" p-2 rounded-md m-4 w-full max-h-10 h-10 ",p=" ".concat(h," bg-green-500 text-white hover:bg-green-600 "),x=" ".concat(h," bg-red-500 text-white hover:bg-red-600 "),g=" ".concat(h," bg-gray-500 text-white hover:bg-gray-600 "),y=" ".concat(h," bg-blue-500 text-white hover:bg-blue-600 "),w=" ".concat(h," bg-gray-500 text-gray-500 cursor-not-allowed ");var j=e=>{let{formId:t}=e,{f:r,abortController:l}=u.RU("customFunction_"+t,(e,t)=>c(e,t),m);return(0,n.jsxs)("form",{className:"border border-white p-4 flex flex-col w-full rounded-md bg-gray-900 m-4 mb-8",onSubmit:function(e){e.preventDefault();let t=e.target;console.log("Form Values",t),r(t)},children:[(0,n.jsx)(f,{}),(0,n.jsx)(b,{}),(0,n.jsx)("div",{className:"flex flex-row",children:(0,n.jsx)("button",{type:"submit",className:y,children:"Submit"})})]})},N=e=>{let{size:t,color:r}=e;return r||(r="white"),(0,n.jsxs)("span",{style:{fontSize:t||"1em",verticalAlign:"middle"},children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:'.elvis-loading-spinner {\n  display: inline-block;\n  width: 2.5em;\n  height: 2.5em;\n}\n.elvis-loading-spinner:after {\n  content: " ";\n  display: block;\n  width: 2.5em;\n  height: 2.5em;\n  margin: 0.2em;\n  border-radius: 50%;\n  border: 0.3em solid '.concat(r,";\n  animation: elvis-loading-spinner 1.0s linear infinite;\n  border-color: ").concat(r," transparent ").concat(r," transparent;\n}\n@keyframes elvis-loading-spinner {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}")}}),(0,n.jsx)("div",{className:"elvis-loading-spinner"})]})},v=e=>{let{formId:t}=e,{f:r,abortController:l}=u.RU("customFunction_"+t,(e,t)=>c(e,t),m),{error:o,clearError:s,residualError:a}=u.pK("customFunction_"+t),{loading:i,cancelled:d,success:h,abortController:j}=u.sU("customFunction_"+t,1e3,1e3);return(0,n.jsxs)("form",{className:"border border-white p-4 flex flex-col w-full rounded-md bg-gray-900 m-4 mb-8",onSubmit:function(e){e.preventDefault();let t=e.target;console.log("Form Values",t),r(t)},children:[(0,n.jsx)(f,{}),(0,n.jsx)(b,{}),(0,n.jsxs)("div",{className:"flex flex-row ",children:[i&&!o?(0,n.jsx)("button",{type:"button",className:y,disabled:!0,children:(0,n.jsx)(N,{size:"0.6em"})}):d&&!o?(0,n.jsx)("button",{type:"button",className:x,disabled:!0,children:d.title}):h&&!o?(0,n.jsx)("button",{type:"button",className:p,disabled:!0,children:h.title}):o?(0,n.jsx)("button",{type:"button",className:g,onClick:e=>{e.preventDefault(),s()},children:"Ignore"}):(0,n.jsx)("button",{type:"submit",className:y,children:"Submit"}),j&&i?(0,n.jsx)("button",{type:"button",className:g,onClick:e=>{e.preventDefault(),j.abort()},children:"Cancel"}):o&&o.canIgnore?(0,n.jsx)("button",{type:"button",className:x,onClick:e=>{e.preventDefault(),window.location.reload()},children:"Reload"}):(0,n.jsx)("button",{type:"button",className:w,disabled:!0,children:"Cancel"})]}),a?(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("p",{className:"text-red-500",children:[a.title,": ",a.message]})}):null]})};function T(e){let t=(0,l.useRef)();return(0,l.useEffect)(()=>{t.current=e},[e]),t.current}var C=e=>{let{formId:t}=e,[r,o]=(0,l.useState)([]),s=T(r),[a,i]=(0,l.useState)([]),d=T(a),[h,j]=(0,l.useState)(),[v,C]=(0,l.useState)(),{f:E,abortController:k}=u.RU("customFunction_"+t,(e,t)=>c(e,t),m),{error:_,clearError:D,residualError:F}=u.pK("customFunction_"+t),S=T(F),{loading:I,cancelled:O,success:P,abortController:R}=u.sU("customFunction_"+t,1e3,1e3);return(0,l.useEffect)(()=>{if(F!==S&&F&&F.optionalMetadata){let e=F.optionalMetadata.inputField;(function(e,t){if(!e)throw Error(t||"Assertion failed: "+e)})("string"==typeof e,"fieldName must be a string"),o([{field:e,error:F}]),i(t=>t.includes(e)?t:[...t,e])}else F!==S&&r.length&&(o([]),i([]))},[F,r,S]),(0,l.useEffect)(()=>{if(r===s&&a===d)return;let e=r.find(e=>"completionType"===e.field),t=a.includes("completionType");C((0,n.jsx)(f,{classNameOverride:e?"".concat(t?"border-4 border-red-500":"border border-black"," p-2 rounded-md text-black"):void 0,onChangeOverride:()=>{i(e=>e.filter(e=>"completionType"!==e))},children:e?(0,n.jsx)("div",{className:"flex flex-col w-16",children:(0,n.jsxs)("p",{className:"text-red-500",children:[e.error.title,": ",e.error.message]})}):null}))},[r,a,s,d]),(0,l.useEffect)(()=>{if(r===s&&a===d)return;let e=r.find(e=>"timeToComplete"===e.field),t=a.includes("timeToComplete");j((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{classNameOverride:e?"".concat(t?"border-4 border-red-500":"border border-black"," p-2 rounded-md text-black"):void 0,onChangeOverride:()=>{i(e=>e.filter(e=>"timeToComplete"!==e))}}),e?(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("p",{className:"text-red-500",children:[e.error.title,": ",e.error.message]})}):null]}))},[r,a,s,d]),(0,n.jsxs)("form",{className:"border border-white p-4 flex flex-col w-full rounded-md bg-gray-900 m-4 mb-8",onSubmit:function(e){e.preventDefault();let t=e.target;console.log("Form Values",t),E(t)},children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[v,h]}),(0,n.jsxs)("div",{className:"flex flex-row",children:[I&&!_?(0,n.jsx)("button",{type:"button",className:g,disabled:!0,children:(0,n.jsx)(N,{size:"0.6em"})}):O&&!_?(0,n.jsx)("button",{type:"button",className:x,disabled:!0,children:O.title}):P&&!_?(0,n.jsx)("button",{type:"button",className:p,disabled:!0,children:P.title}):_?(0,n.jsx)("button",{type:"button",className:g,onClick:e=>{e.preventDefault(),D()},children:"Ignore"}):(0,n.jsx)("button",{type:"submit",className:y,children:"Submit"}),R&&I?(0,n.jsx)("button",{type:"button",className:x,onClick:e=>{e.preventDefault(),R.abort()},children:"Cancel"}):_&&_.canIgnore?(0,n.jsx)("button",{type:"button",className:x,onClick:e=>{e.preventDefault(),window.location.reload()},children:"Reload"}):(0,n.jsx)("button",{type:"button",className:w,disabled:!0,children:"Cancel"})]}),F&&!r.length?(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("p",{className:"text-red-500",children:[F.title,": ",F.message]})}):null]})};function E(){return(0,n.jsxs)("main",{className:"flex w-full min-h-screen flex-col items-center justify-between p-24",children:[(0,n.jsxs)("h1",{className:"text-4xl font-bold text-center mb-8",children:[(0,n.jsx)("a",{href:"https://github.com/sheldonfrith/react-elvis",className:"text-blue-500 hover:underline",children:"React-Elvis"})," ","Example Page"]}),(0,n.jsx)("i",{className:"mb-6",children:"\uD83D\uDCA1 Type something non-numeric to see how input errors can be displayed..."}),(0,n.jsx)(u._z,{}),(0,n.jsxs)("h2",{className:"text-2xl font-bold text-center",children:[" ","Feedback via Popup \uD83D\uDCF0"]}),(0,n.jsx)(j,{formId:"viaGlobalPopup"}),(0,n.jsxs)("h1",{className:"text-2xl font-bold text-center",children:[" ","Feedback at the Bottom ⬇️"," "]}),(0,n.jsx)(v,{formId:"viaBottomOnly"}),(0,n.jsxs)("h1",{className:"text-2xl font-bold text-center",children:[" ","Feedback Integrated \uD83E\uDD1D"," "]}),(0,n.jsx)(C,{formId:"viaVariousChannels"})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);