{"version":3,"file":"index.js","sources":["../../lib/config/messages.ts","../../lib/helpers/myAssert.ts","../../lib/components/elvis-context/ElvisContext.tsx","../../lib/hooks/useErrorDisplaySetup.ts","../../lib/hooks/useLoadingDisplaySetup.ts","../../lib/components/elvis-context/helpers/findErrorDisplayers_Internals.ts","../../lib/components/elvis-context/helpers/handleErrorDetected_Internals.ts","../../lib/components/elvis-context/helpers/identicalAsyncFunctionRegistered.ts","../../lib/components/elvis-context/helpers/catchPromiseErrors.ts","../../lib/hooks/usePrevious.ts","../../lib/hooks/useRegisterAsyncFunction.ts","../../lib/hooks/useRegisterAsyncFunctionAbortable.ts","../../lib/components/elvis-context/helpers/resetableAbortController.ts","../../lib/components/elvis-context/helpers/processAsyncFunctionExecutionQueue.ts","../../lib/components/elvis-context/ElvisProvider.tsx","../../lib/helpers/deepOverwrite.ts","../../lib/components/elvis-default/CustomizableButton.tsx","../../lib/components/elvis-default/LoadingSpinner.tsx","../../lib/hooks/useElvis.ts","../../lib/components/elvis-default/ElvisDefault.tsx"],"sourcesContent":["/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport {\r\n  ElvisDisplayConfig,\r\n  UserFacingCancelled,\r\n  UserFacingError,\r\n  UserFacingLoading,\r\n  UserFacingSuccess,\r\n} from \"../helpers/types\";\r\n\r\nexport const customFunctionConfig: ElvisDisplayConfig = {\r\n  defaultError: {\r\n    title: \"Unknown Error With Test Function\",\r\n    message: \"An unknown error occurred with the test function.\",\r\n    canIgnore: false,\r\n  },\r\n  loading: {\r\n    title: \"Running Test Function\",\r\n    message: \"The test function is running.\",\r\n  },\r\n  definedErrors: [\r\n    //where message is json\r\n    (error: unknown) => {\r\n      try {\r\n        const parsed = JSON.parse((error as Error).message);\r\n        if (parsed && typeof parsed === \"object\") {\r\n          if (parsed[\"timeToComplete\"]) {\r\n            return {\r\n              title: \"Error in 'Delay'\",\r\n              message: parsed[\"timeToComplete\"],\r\n              canIgnore: true,\r\n              optionalMetadata: { inputField: \"timeToComplete\" },\r\n            };\r\n          }\r\n          if (parsed[\"completionType\"]) {\r\n            return {\r\n              title: \"Error in 'Result Type'\",\r\n              message: parsed[\"completionType\"],\r\n              canIgnore: true,\r\n              optionalMetadata: { inputField: \"completionType\" },\r\n            };\r\n          }\r\n        }\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    },\r\n    // where it is our intentional error\r\n    (error: unknown) => {\r\n      if (error instanceof Error) {\r\n        if (error.message === \"This is an example error\") {\r\n          return {\r\n            title: \"Intentional Error\",\r\n            message:\r\n              \"This is the error you chose to throw, for testing purposes.\",\r\n            canIgnore: true,\r\n          };\r\n        }\r\n      }\r\n    },\r\n  ],\r\n};\r\n\r\nexport const unhandledPromiseRejectionError: ElvisDisplayConfig = {\r\n  defaultError: {\r\n    title: \"Unhandled Promise Rejection Error\",\r\n    message:\r\n      \"React-Eals automatic error handling cannot properly handle 'unhandled promise rejections'. You need to ensure that every promise in your code catches all internal errors and 'rejects' with them.\",\r\n    canIgnore: false,\r\n  },\r\n};\r\n\r\nexport const DefaultUserFacingError: UserFacingError = {\r\n  title: \"Unidentified Error\",\r\n  message:\r\n    \"An unidentified error occurred. Restarting the application may resolve the issue. If the problem persists, please contact support.\",\r\n  canIgnore: false,\r\n};\r\n\r\nexport const DefaultUserFacingLoading: UserFacingLoading = {\r\n  title: \"Loading\",\r\n  message: \"Please wait.\",\r\n};\r\n\r\nexport const DefaultUserFacingSuccess: UserFacingSuccess = {\r\n  title: \"Success\",\r\n  message: \"The operation was successful. üëç\",\r\n};\r\nexport const DefaultUserFacingCancelled: UserFacingCancelled = {\r\n  title: \"Cancelled\",\r\n  message: \"The operation was cancelled. ‚ùå\",\r\n};\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nexport function assert(condition: any, message?: string): asserts condition {\r\n  if (!condition) {\r\n    throw new Error(message || \"Assertion failed: \" + condition);\r\n  }\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport React from \"react\";\r\nimport {\r\n  ElvisDisplayConfig,\r\n  UserFacingError,\r\n  UserFacingLoading,\r\n  UserFacingCancelled,\r\n  UserFacingSuccess,\r\n} from \"../../helpers/types\";\r\n\r\nexport const ElvisContext = React.createContext({\r\n  async: {\r\n    wrappedFunctions: {} as Record<string, (...args: any[]) => Promise<any>>,\r\n    register: <ArgsType extends any[], ReturnType>(\r\n      identifier: string,\r\n      f: (...args: ArgsType) => Promise<ReturnType>,\r\n      config: ElvisDisplayConfig\r\n    ): ((...args: ArgsType) => Promise<ReturnType>) | undefined => {\r\n      return (...args: any[]) => new Promise((resolve, reject) => {});\r\n    },\r\n    abortable: {\r\n      register: <ArgsType extends any[], ReturnType>(\r\n        identifier: string,\r\n        f: (\r\n          abortController: AbortController,\r\n          ...args: ArgsType\r\n        ) => Promise<ReturnType>,\r\n        config: ElvisDisplayConfig\r\n      ): ((...args: ArgsType) => Promise<ReturnType>) | undefined => {\r\n        return (...args: any[]) => new Promise((resolve, reject) => {});\r\n      },\r\n\r\n      getAbortController: (identifier: string): AbortController | undefined => {\r\n        return undefined;\r\n      },\r\n    },\r\n  },\r\n  display: {\r\n    error: {\r\n      handle: (\r\n        identifier: string\r\n      ): {\r\n        error: UserFacingError | undefined;\r\n        clearError: () => void;\r\n        residualError: UserFacingError | undefined;\r\n      } => ({\r\n        error: undefined,\r\n        clearError: () => {},\r\n        residualError: undefined,\r\n      }),\r\n      default: (): {\r\n        error: UserFacingError | undefined;\r\n        clearError: () => void;\r\n        residualError: UserFacingError | undefined;\r\n      } => ({\r\n        error: undefined,\r\n        clearError: () => {},\r\n        residualError: undefined,\r\n      }),\r\n    },\r\n    loading: {\r\n      handle: (\r\n        identifier: string,\r\n        durationOfCancelledState: number,\r\n        durationOfSuccessState: number\r\n      ): {\r\n        loading: UserFacingLoading | undefined;\r\n        cancelled: UserFacingCancelled | undefined;\r\n        success: UserFacingSuccess | undefined;\r\n      } => {\r\n        return {\r\n          loading: undefined,\r\n          cancelled: undefined,\r\n          success: undefined,\r\n        };\r\n      },\r\n      default: (\r\n        durationOfCancelledState: number,\r\n        durationOfSuccessState: number\r\n      ): {\r\n        loading: UserFacingLoading | undefined;\r\n        cancelled: UserFacingCancelled | undefined;\r\n        success: UserFacingSuccess | undefined;\r\n        abortController: AbortController | undefined;\r\n      } => {\r\n        return {\r\n          loading: undefined,\r\n          cancelled: undefined,\r\n          success: undefined,\r\n          abortController: undefined,\r\n        };\r\n      },\r\n    },\r\n  },\r\n});\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport { ErrorDisplayer, UserFacingError } from \"../helpers/types\";\r\nimport { ElvisContext } from \"../components/elvis-context/ElvisContext\";\r\n\r\nexport function useErrorDisplaySetup(\r\n  identifier: string,\r\n  registerFunction: (c: ErrorDisplayer) => void\r\n) {\r\n  const context = useContext(ElvisContext);\r\n\r\n  const [errorState, setErrorState] = useState<UserFacingError>();\r\n  // this captures the current or previous error state, and is erased as soon as the same function is called again\r\n  const [residualErrorState, setResidualErrorState] =\r\n    useState<UserFacingError>();\r\n  // will still be available after clearing the error state\r\n  useEffect(() => {\r\n    if (errorState) {\r\n      setResidualErrorState(errorState);\r\n    }\r\n  }, [errorState]);\r\n\r\n  useEffect(() => {\r\n    if (!context) {\r\n      throw new Error(\"ElvisContext not loaded\");\r\n    }\r\n    registerFunction({\r\n      id: identifier,\r\n      onErrorDetected: (error: UserFacingError) => {\r\n        setErrorState(error);\r\n      },\r\n      onNewFunctionCall: () => {\r\n        setResidualErrorState(undefined);\r\n      },\r\n    });\r\n  }, []);\r\n  return {\r\n    error: errorState,\r\n    clearError: () => setErrorState(undefined),\r\n    residualError: residualErrorState,\r\n  };\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport {\r\n  UserFacingLoading,\r\n  UserFacingCancelled,\r\n  UserFacingSuccess,\r\n  LoadingDisplayer,\r\n} from \"../helpers/types\";\r\nimport { ElvisContext } from \"../components/elvis-context/ElvisContext\";\r\n\r\nexport function useLoadingDisplaySetup(\r\n  identifier: string,\r\n  registerFunction: (c: LoadingDisplayer) => void,\r\n  durationOfCancelledState: number,\r\n  durationOfSuccessState: number\r\n) {\r\n  const context = useContext(ElvisContext);\r\n  const [loadingState, setLoadingState] = useState<UserFacingLoading>();\r\n  const [abortController, setAbortController] = useState<AbortController>();\r\n  const [cancelledState, setCancelledState] = useState<UserFacingCancelled>();\r\n  const [successState, setSuccessState] = useState<UserFacingSuccess>();\r\n\r\n  useEffect(() => {\r\n    if (cancelledState) {\r\n      setTimeout(() => {\r\n        setCancelledState(undefined);\r\n      }, durationOfCancelledState);\r\n    }\r\n  }, [cancelledState]);\r\n\r\n  useEffect(() => {\r\n    if (successState) {\r\n      setTimeout(() => {\r\n        setSuccessState(undefined);\r\n      }, durationOfSuccessState);\r\n    }\r\n  }, [successState]);\r\n\r\n  const onLoadingStart = useCallback(\r\n    (loading: UserFacingLoading, abortController?: AbortController) => {\r\n      setLoadingState(loading);\r\n      if (abortController) {\r\n        setAbortController(abortController);\r\n      }\r\n    },\r\n    [setLoadingState, setAbortController]\r\n  );\r\n  const onLoadingEnd = useCallback(\r\n    (success: UserFacingSuccess) => {\r\n      setLoadingState(undefined);\r\n      setSuccessState(success);\r\n    },\r\n    [setLoadingState, setSuccessState]\r\n  );\r\n  const onLoadingCancel = useCallback(\r\n    (cancelled: UserFacingCancelled) => {\r\n      setLoadingState(undefined);\r\n      setCancelledState(cancelled);\r\n    },\r\n    [setLoadingState, setCancelledState]\r\n  );\r\n  const onErrorDetected = useCallback(() => {\r\n    setCancelledState(undefined);\r\n    setSuccessState(undefined);\r\n  }, [setCancelledState, setSuccessState]);\r\n\r\n  useEffect(() => {\r\n    registerFunction({\r\n      id: identifier,\r\n      onLoadingStart,\r\n      onLoadingEnd,\r\n      onLoadingCancel,\r\n      onErrorDetected,\r\n    });\r\n  }, []);\r\n  return {\r\n    loading: loadingState,\r\n    cancelled: cancelledState,\r\n    success: successState,\r\n    abortController,\r\n  };\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport { assert } from \"../../../helpers/myAssert\";\r\nimport {\r\n  ErrorDisplayer,\r\n  UserFacingAsyncFunction,\r\n} from \"../../../helpers/types\";\r\n\r\nexport function findErrorDisplayers_Internals(\r\n  errorDisplayers: ErrorDisplayer[],\r\n  defaultErrorDisplayer: ErrorDisplayer | undefined,\r\n  identifier: string,\r\n  error: unknown\r\n) {\r\n  const displayers = errorDisplayers.filter((d) => d.id === identifier);\r\n  const displayersApplicable = displayers.filter((d) => {\r\n    return !d.onlyTheseErrors || d.onlyTheseErrors.some((f) => f(error));\r\n  });\r\n  if (displayersApplicable.length > 0) {\r\n    return displayersApplicable;\r\n  }\r\n  const d = defaultErrorDisplayer;\r\n  assert(d, `No default Error Displayer found.`);\r\n  return [d];\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport { DefaultUserFacingError } from \"../../../config/messages\";\r\nimport {\r\n  UserFacingAsyncFunction,\r\n  ErrorDisplayer,\r\n  LoadingDisplayer,\r\n} from \"../../../helpers/types\";\r\n\r\nexport function handleErrorDetected_Internals(\r\n  id: string,\r\n  error: unknown,\r\n  registeredFunctions: Record<string, UserFacingAsyncFunction<any>>,\r\n  findErrorDisplayers: (id: string, error: unknown) => ErrorDisplayer[],\r\n  findLoadingDisplayer: (id: string) => LoadingDisplayer\r\n) {\r\n  const f = registeredFunctions[id];\r\n  const ds = findErrorDisplayers(id, error);\r\n  ds.forEach((d) => {\r\n    const definedError = f?.config.definedErrors?.find((f) => f(error));\r\n    if (definedError) {\r\n      d.onErrorDetected(definedError(error)!);\r\n    } else {\r\n      d.onErrorDetected(f?.config.defaultError || DefaultUserFacingError);\r\n    }\r\n  });\r\n  const ld = findLoadingDisplayer(id);\r\n  ld.onErrorDetected();\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport {\r\n  ElvisDisplayConfig,\r\n  UserFacingAsyncFunction,\r\n} from \"../../../helpers/types\";\r\n\r\nexport function identicalAsyncFunctionRegistered(\r\n  identifier: string,\r\n  f: (...args: any) => Promise<any>,\r\n  config: ElvisDisplayConfig | undefined,\r\n  abortable: \"abortable\" | \"not-abortable\",\r\n  registeredFunctions: Record<string, UserFacingAsyncFunction<any>>\r\n) {\r\n  const match = registeredFunctions[identifier];\r\n  const somethingExists = !!match;\r\n  if (!somethingExists) {\r\n    return;\r\n  }\r\n  const callbackSame = match.callback === f;\r\n  const abortableSame = match.abortable === abortable;\r\n  const configSame =\r\n    !!match.config || !!config ? match.config === config : true;\r\n  return somethingExists && callbackSame && abortableSame && configSame;\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nexport const catchPromiseErrors = <T>(\r\n  promise: Promise<T>\r\n): Promise<[T | undefined, unknown | undefined]> => {\r\n  return promise\r\n    .then<[T | undefined, unknown | undefined]>((data) => [data, undefined])\r\n    .catch<[T | undefined, unknown | undefined]>((error) =>\r\n      Promise.resolve([undefined, error])\r\n    );\r\n};\r\n","import { useRef, useEffect } from \"react\";\r\n\r\nexport function usePrevious(value: any) {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]);\r\n  return ref.current;\r\n}\r\n","import { ElvisDisplayConfig } from \"../helpers/types\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { ElvisContext } from \"..\";\r\nimport { usePrevious } from \"./usePrevious\";\r\n\r\nexport function useRegisterAsyncFunction<ArgsType extends any[], ReturnType>(\r\n  identifier: string,\r\n  f_unwrapped: (...args: ArgsType) => Promise<ReturnType>,\r\n  config: ElvisDisplayConfig,\r\n  registerFunction: (\r\n    identifier: string,\r\n    f: (...args: ArgsType) => Promise<ReturnType>,\r\n    config: ElvisDisplayConfig\r\n  ) => (...args: ArgsType) => Promise<ReturnType>\r\n): ((...args: ArgsType) => Promise<ReturnType>) | undefined {\r\n  const elvis = useContext(ElvisContext);\r\n  const [f, setF] = useState<(...args: ArgsType) => Promise<ReturnType>>();\r\n  const prevWrappedFunctions = usePrevious(elvis.async.wrappedFunctions);\r\n  //call register whenever dependency changes\r\n  useEffect(() => {\r\n    registerFunction(identifier, f_unwrapped, config);\r\n  }, [f_unwrapped, identifier, config]);\r\n  // keep up to date\r\n  useEffect(() => {\r\n    if (elvis.async.wrappedFunctions === prevWrappedFunctions) return;\r\n    if (elvis.async.wrappedFunctions[identifier] !== f) {\r\n      setF(() => elvis.async.wrappedFunctions[identifier]);\r\n    }\r\n  }, [elvis.async.wrappedFunctions, f]);\r\n  return f;\r\n}\r\n","import { ElvisDisplayConfig } from \"../helpers/types\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { ElvisContext } from \"..\";\r\nimport { usePrevious } from \"./usePrevious\";\r\n\r\nexport function useRegisterAsyncFunctionAbortable<\r\n  ArgsType extends any[],\r\n  ReturnType\r\n>(\r\n  identifier: string,\r\n  f_unwrapped: (\r\n    abortController: AbortController,\r\n    ...args: ArgsType\r\n  ) => Promise<ReturnType>,\r\n  config: ElvisDisplayConfig,\r\n  registerFunction: (\r\n    identifier: string,\r\n    f: (\r\n      abortController: AbortController,\r\n      ...args: ArgsType\r\n    ) => Promise<ReturnType>,\r\n    config: ElvisDisplayConfig\r\n  ) => (...args: ArgsType) => Promise<ReturnType>\r\n): ((...args: ArgsType) => Promise<ReturnType>) | undefined {\r\n  const elvis = useContext(ElvisContext);\r\n  const [f, setF] = useState<(...args: ArgsType) => Promise<ReturnType>>();\r\n  const prevWrappedFunctions = usePrevious(elvis.async.wrappedFunctions);\r\n  //initial registration\r\n  useEffect(() => {\r\n    registerFunction(identifier, f_unwrapped, config);\r\n  }, [f_unwrapped]);\r\n  // keep up to date\r\n  useEffect(() => {\r\n    if (elvis.async.wrappedFunctions === prevWrappedFunctions) return;\r\n    if (elvis.async.wrappedFunctions[identifier] !== f) {\r\n      setF(() => elvis.async.wrappedFunctions[identifier]);\r\n    }\r\n  }, [elvis.async.wrappedFunctions, f]);\r\n  return f;\r\n}\r\n","export function resetableAbortController(\r\n  resetAbortControllerCallback: (fresh: AbortController) => void,\r\n  onabort: (e: Event) => void\r\n): AbortController {\r\n  const n = new AbortController();\r\n  n.signal.onabort = (e: Event) => {\r\n    const fresh = resetableAbortController(\r\n      resetAbortControllerCallback,\r\n      onabort\r\n    );\r\n    resetAbortControllerCallback(fresh);\r\n    onabort(e);\r\n  };\r\n  return n;\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport {\r\n  FunctionExecutionRequest,\r\n  UserFacingAsyncFunction,\r\n} from \"../../../helpers/types\";\r\n\r\nexport async function processAsyncFunctionExecutionRequest(\r\n  executionRequest: FunctionExecutionRequest,\r\n  registeredFunctions: Record<string, UserFacingAsyncFunction<any>>,\r\n  functionWrapper: (f: UserFacingAsyncFunction, args: any) => Promise<any>\r\n) {\r\n  const maxWaitTime = 2000;\r\n  // whenever a new execution request is added, or whenever a function changes\r\n  const now = Date.now();\r\n  const howOld = now - executionRequest.calledAt;\r\n  if (howOld > maxWaitTime) {\r\n    executionRequest.reject(\r\n      new Error(\r\n        `We were unable to execute the function in time. Function: ${executionRequest.id}. Args: ${executionRequest.args} `\r\n      )\r\n    );\r\n    return;\r\n  }\r\n  const match = registeredFunctions[executionRequest.id];\r\n  if (!match) {\r\n    executionRequest.reject(\r\n      new Error(\r\n        `We were unable to find a registered function with the id: ${executionRequest.id}`\r\n      )\r\n    );\r\n  } else {\r\n    // if the current function is the same age or newer than our timestamp then we can run it\r\n    if (match.versionTimestamp >= executionRequest.versionTimestamp) {\r\n      try {\r\n        executionRequest.resolve(\r\n          await functionWrapper(match, executionRequest.args)\r\n        );\r\n      } catch (e) {\r\n        executionRequest.reject(e);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport async function processQueue(\r\n  queue: FunctionExecutionRequest[],\r\n  registeredFunctions: Record<string, UserFacingAsyncFunction<any>>,\r\n  functionWrapper: (f: UserFacingAsyncFunction, args: any) => Promise<any>,\r\n  setQueue: (queue: FunctionExecutionRequest[]) => void\r\n) {\r\n  if (queue.length > 0) {\r\n    // Execute the first item in the queue\r\n    const [currentItem, ...remainingItems] = queue;\r\n    setQueue(remainingItems);\r\n\r\n    // Process the rest of the queue after the current item\r\n    await processQueue(\r\n      remainingItems,\r\n      registeredFunctions,\r\n      functionWrapper,\r\n      setQueue\r\n    );\r\n\r\n    // Execute the current item\r\n    await processAsyncFunctionExecutionRequest(\r\n      currentItem,\r\n      registeredFunctions,\r\n      functionWrapper\r\n    );\r\n  }\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\n\r\nimport React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  PropsWithChildren,\r\n} from \"react\";\r\nimport {\r\n  DefaultUserFacingLoading,\r\n  DefaultUserFacingCancelled,\r\n  DefaultUserFacingSuccess,\r\n  unhandledPromiseRejectionError,\r\n} from \"../../config/messages\";\r\nimport {\r\n  ErrorDisplayer,\r\n  UserFacingAsyncFunction,\r\n  ElvisConfig,\r\n  LoadingDisplayer,\r\n  ElvisDisplayConfig,\r\n  FunctionExecutionRequest,\r\n} from \"../../helpers/types\";\r\nimport { assert } from \"../../helpers/myAssert\";\r\n\r\nimport { useErrorDisplaySetup } from \"../../hooks/useErrorDisplaySetup\";\r\nimport { useLoadingDisplaySetup } from \"../../hooks/useLoadingDisplaySetup\";\r\nimport { ElvisContext } from \"./ElvisContext\";\r\nimport { findErrorDisplayers_Internals } from \"./helpers/findErrorDisplayers_Internals\";\r\nimport { handleErrorDetected_Internals } from \"./helpers/handleErrorDetected_Internals\";\r\nimport { identicalAsyncFunctionRegistered } from \"./helpers/identicalAsyncFunctionRegistered\";\r\nimport { catchPromiseErrors } from \"./helpers/catchPromiseErrors\";\r\nimport { useRegisterAsyncFunction } from \"../../hooks/useRegisterAsyncFunction\";\r\nimport { useRegisterAsyncFunctionAbortable } from \"../../hooks/useRegisterAsyncFunctionAbortable\";\r\nimport { resetableAbortController } from \"./helpers/resetableAbortController\";\r\nimport {\r\n  processAsyncFunctionExecutionRequest,\r\n  processQueue,\r\n} from \"./helpers/processAsyncFunctionExecutionQueue\";\r\n\r\nexport const ElvisProvider: React.FunctionComponent<\r\n  PropsWithChildren<{ config?: ElvisConfig }>\r\n> = ({ config: elvisConfig, children }) => {\r\n  //! STATE VARIABLES //\r\n  const [loadingDisplayers, setLoadingDisplayers] = useState<\r\n    LoadingDisplayer[]\r\n  >([]);\r\n  const [errorDisplayers, setErrorDisplayers] = useState<ErrorDisplayer[]>([]);\r\n  const [defaultLoadingDisplayer, setDefaultLoadingDisplayer] =\r\n    useState<LoadingDisplayer>();\r\n  const [defaultErrorDisplayer, setDefaultErrorDisplayer] =\r\n    useState<ErrorDisplayer>();\r\n  const [pendingUncatchableErrors, setPendingUncatchableErrors] = useState<\r\n    { query: UserFacingAsyncFunction; error: unknown }[]\r\n  >([]);\r\n  const [registeredFunctions, setRegisteredFunctions] = useState<\r\n    Record<string, UserFacingAsyncFunction>\r\n  >({});\r\n  const [abortControllers, setAbortControllers] = useState<\r\n    Record<string, AbortController>\r\n  >({});\r\n\r\n  const [wrappedFunctions, setWrappedFunctions] = useState<\r\n    Record<string, (...args: any[]) => Promise<any>>\r\n  >({});\r\n  const [asyncFunctionExecutionQueue, setAsyncFunctionExecutionQueue] =\r\n    useState<FunctionExecutionRequest[]>([]);\r\n\r\n  const [abortEventsQueue, setAbortEventsQueue] = useState<string[]>([]);\r\n\r\n  //! DEBUGGING //\r\n  useEffect(() => {\r\n    console.log(\"asyncFunctionExecutionQueue\", asyncFunctionExecutionQueue);\r\n  }, [asyncFunctionExecutionQueue]);\r\n\r\n  //!\r\n\r\n  // ! HELPER TO SETUP ABORT CONTROLLER ON NEW REGISTER REQUEST //\r\n  const setupAbortControllerForNewAsyncFunction = useCallback(\r\n    (id: string) => {\r\n      setAbortControllers((prev) => {\r\n        if (id in prev && prev[id]) return prev;\r\n        const c = resetableAbortController(\r\n          (fresh: AbortController) =>\r\n            setAbortControllers((prev) => {\r\n              return { ...prev, [id]: fresh };\r\n            }),\r\n          (e: Event) => {\r\n            setAbortEventsQueue((prev) => {\r\n              return [...prev, id];\r\n            });\r\n          }\r\n        );\r\n        return { ...prev, [id]: c };\r\n      });\r\n    },\r\n    [setAbortControllers]\r\n  );\r\n  useEffect(() => {\r\n    if (!abortEventsQueue.length) return;\r\n    setAbortEventsQueue((prev) => {\r\n      const s = new Set(prev);\r\n      s.forEach((id) => {\r\n        handleLoadingCancel(id);\r\n      });\r\n      return [];\r\n    });\r\n  }, [abortEventsQueue]);\r\n\r\n  //! Handling function executions //\r\n\r\n  useEffect(() => {\r\n    if (!asyncFunctionExecutionQueue.length) return;\r\n    processQueue(\r\n      asyncFunctionExecutionQueue,\r\n      registeredFunctions,\r\n      runAsyncFunctionWithEventHandlers,\r\n      setAsyncFunctionExecutionQueue\r\n    );\r\n  }, [asyncFunctionExecutionQueue, registeredFunctions]);\r\n\r\n  //! DISPLAYER FINDERS //\r\n  const findLoadingDisplayer = useCallback(\r\n    (id: string) => {\r\n      const displayer = loadingDisplayers.find((d) => d.id === id);\r\n      const d = displayer || defaultLoadingDisplayer;\r\n      assert(\r\n        d,\r\n        `No default Loading Displayer found. ${id} and ${JSON.stringify(\r\n          loadingDisplayers\r\n        )}`\r\n      );\r\n      return d;\r\n    },\r\n    [loadingDisplayers, defaultLoadingDisplayer]\r\n  );\r\n\r\n  const findErrorDisplayers = useCallback(\r\n    (id: string, error: unknown) => {\r\n      return findErrorDisplayers_Internals(\r\n        errorDisplayers,\r\n        defaultErrorDisplayer,\r\n        id,\r\n        error\r\n      );\r\n    },\r\n    [errorDisplayers, defaultErrorDisplayer]\r\n  );\r\n  const findAllErrorDisplayers = useCallback(\r\n    (id: string) => {\r\n      const displayers = errorDisplayers.filter((d) => d.id === id);\r\n      if (displayers.length > 0) {\r\n        return displayers;\r\n      } else {\r\n        if (defaultErrorDisplayer) {\r\n          return [defaultErrorDisplayer];\r\n        }\r\n        throw new Error(\"No default Error Displayer found.\");\r\n      }\r\n    },\r\n    [errorDisplayers, defaultErrorDisplayer]\r\n  );\r\n  //! EVENT HANDLERS //\r\n  const handleLoadingStart = useCallback(\r\n    (id: string) => {\r\n      const d = findLoadingDisplayer(id);\r\n      const f = registeredFunctions[id];\r\n      d.onLoadingStart(\r\n        f?.config?.loading || DefaultUserFacingLoading,\r\n        abortControllers[id]\r\n      );\r\n      // error displayer\r\n      const errorDisplayers = findAllErrorDisplayers(id);\r\n      errorDisplayers.forEach((d) => {\r\n        d.onNewFunctionCall();\r\n      });\r\n    },\r\n    [findAllErrorDisplayers, findLoadingDisplayer, registeredFunctions]\r\n  );\r\n  const handleLoadingCancel = useCallback(\r\n    (id: string) => {\r\n      const d = findLoadingDisplayer(id);\r\n      const f = registeredFunctions[id];\r\n      d.onLoadingCancel(f?.config?.cancelled || DefaultUserFacingCancelled);\r\n    },\r\n    [findLoadingDisplayer, registeredFunctions]\r\n  );\r\n  const handleLoadingEnd = useCallback(\r\n    (id: string) => {\r\n      const d = findLoadingDisplayer(id);\r\n      const f = registeredFunctions[id];\r\n      d.onLoadingEnd(f?.config?.success || DefaultUserFacingSuccess);\r\n    },\r\n    [findLoadingDisplayer, registeredFunctions]\r\n  );\r\n  const handleErrorDetected = useCallback(\r\n    (id: string, error: unknown) => {\r\n      handleErrorDetected_Internals(\r\n        id,\r\n        error,\r\n        registeredFunctions,\r\n        findErrorDisplayers,\r\n        findLoadingDisplayer\r\n      );\r\n    },\r\n    [findLoadingDisplayer, findErrorDisplayers, registeredFunctions]\r\n  );\r\n  //! DEFAULT DISPLAYERS CHECK //\r\n  //wait for app to load, then check for default displayers\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setDefaultErrorDisplayer((prev) => {\r\n        if (!prev && !elvisConfig?.disableDefaultErrorDisplayerCheck) {\r\n          throw new Error(\r\n            \"No default error displayer found. Please register a default error displayer or disable the default displayer check using the config prop in the Eals Provider.\"\r\n          );\r\n        }\r\n        return prev;\r\n      });\r\n      setDefaultLoadingDisplayer((prev) => {\r\n        if (!prev && !elvisConfig?.disableDefaultLoadingDisplayerCheck) {\r\n          throw new Error(\r\n            \"No default loading displayer found. Please register a default loading displayer or disable the default displayer check using the config prop in the Eals Provider.\"\r\n          );\r\n        }\r\n        return prev;\r\n      });\r\n    }, elvisConfig?.graceTimeToDetectDefaultDisplayers || 1000);\r\n  }, []);\r\n\r\n  //! UNHANDLED PROMISE REJECTION HANDLER //\r\n  // filter for when the user's code is missing promise rejection handlers\r\n  useEffect(() => {\r\n    registerUnabortable(\r\n      \"unhandledrejection\",\r\n      async () => {},\r\n      unhandledPromiseRejectionError\r\n    );\r\n    const unhandledRejectionHandler = (event: any) => {\r\n      setPendingUncatchableErrors((prev) => {\r\n        return [\r\n          ...prev,\r\n          {\r\n            query: {\r\n              id: \"unhandledrejection\",\r\n              versionTimestamp: -1, // does not matter is not used\r\n              callback: async () => {}, // does not matter is not used\r\n              config: unhandledPromiseRejectionError,\r\n              abortable: \"not-abortable\", // does not matter is not used\r\n            },\r\n            error: event.reason,\r\n          },\r\n        ];\r\n      });\r\n    };\r\n    window.addEventListener(\"unhandledrejection\", unhandledRejectionHandler, {\r\n      once: true,\r\n    });\r\n    return () => {\r\n      window.removeEventListener(\r\n        \"unhandledrejection\",\r\n        unhandledRejectionHandler\r\n      );\r\n    };\r\n  }, []);\r\n\r\n  // handle the uncatchable errors\r\n  useEffect(() => {\r\n    if (pendingUncatchableErrors.length > 0) {\r\n      const error = pendingUncatchableErrors[0];\r\n      handleErrorDetected(error.query.id, error.error);\r\n      setPendingUncatchableErrors((prev) => {\r\n        return prev.slice(1);\r\n      });\r\n    }\r\n  }, [pendingUncatchableErrors, handleErrorDetected]);\r\n\r\n  //! WRAPPERS - CORE FUNCTIONALITY //\r\n\r\n  const createFunctionExecutionRequestAndGetPromise = useCallback(\r\n    (id: string, versionTimestamp: number, newArgs: any[]) => {\r\n      return new Promise<any>((resolve, reject) => {\r\n        setAsyncFunctionExecutionQueue((prev) => {\r\n          return [\r\n            ...prev,\r\n            {\r\n              calledAt: Date.now(),\r\n              id,\r\n              versionTimestamp,\r\n              args: newArgs,\r\n              resolve,\r\n              reject,\r\n            },\r\n          ];\r\n        });\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  const runAsyncFunctionWithEventHandlers = useCallback(\r\n    async <ArgsType extends any[]>(\r\n      f: UserFacingAsyncFunction,\r\n      args: ArgsType\r\n    ) => {\r\n      try {\r\n        // Set loading to true while the request is in progress\r\n        handleLoadingStart(f.id);\r\n        if (f.abortable === \"abortable\") {\r\n          const abortController = abortControllers[f.id];\r\n          assert(abortController, \"No abort controller found for id \" + f.id);\r\n          const [result, error] = await catchPromiseErrors(\r\n            // We handle passing in the abort controller for them, to make the final API cleaner\r\n            f.callback(abortController, ...args)\r\n          );\r\n          if (error) {\r\n            throw error;\r\n          }\r\n          handleLoadingEnd(f.id);\r\n          return result;\r\n        } else {\r\n          const [result, error] = await catchPromiseErrors(f.callback(...args));\r\n          if (error) {\r\n            throw error;\r\n          }\r\n          handleLoadingEnd(f.id);\r\n          return result;\r\n        }\r\n      } catch (error) {\r\n        handleLoadingEnd(f.id);\r\n        handleErrorDetected(f.id, error);\r\n        console.error(\"Error handled by react-elvis\", error);\r\n      }\r\n    },\r\n    [\r\n      handleLoadingStart,\r\n      handleLoadingEnd,\r\n      handleErrorDetected,\r\n      abortControllers,\r\n    ]\r\n  );\r\n\r\n  //! Display Registration Helpers ///\r\n  function registerLoadingDisplayer(c: LoadingDisplayer) {\r\n    setLoadingDisplayers((prev) => {\r\n      return [...prev, { ...c }];\r\n    });\r\n  }\r\n\r\n  function registerDefaultLoadingDisplayer(c: LoadingDisplayer) {\r\n    setDefaultLoadingDisplayer({ ...c });\r\n  }\r\n\r\n  //! NEW FUNCTION REGISTRATION FUNCTIONS //\r\n\r\n  const registerAbortable = useCallback(\r\n    <ArgsType extends any[], ReturnType>(\r\n      id: string,\r\n      f: (\r\n        abortController: AbortController,\r\n        ...args: ArgsType\r\n      ) => Promise<ReturnType>,\r\n      config: ElvisDisplayConfig\r\n    ): ((...args: ArgsType) => Promise<ReturnType>) => {\r\n      const abortable = \"abortable\" as const;\r\n      setRegisteredFunctions((prev) => {\r\n        if (identicalAsyncFunctionRegistered(id, f, config, abortable, prev)) {\r\n          return prev;\r\n        }\r\n        const timestamp = Date.now();\r\n        const p = prev[id];\r\n        const isNew = !p;\r\n        const n = isNew\r\n          ? {\r\n              id,\r\n              versionTimestamp: timestamp,\r\n              callback: f,\r\n              abortable,\r\n              config,\r\n            }\r\n          : {\r\n              ...p,\r\n              versionTimestamp: timestamp,\r\n              callback: f,\r\n              abortable,\r\n              config,\r\n            };\r\n        if (isNew && abortable === \"abortable\") {\r\n          setupAbortControllerForNewAsyncFunction(id);\r\n        }\r\n        setWrappedFunctions((prev) => {\r\n          return {\r\n            ...prev,\r\n            [id]: async (...args: any) => {\r\n              return await createFunctionExecutionRequestAndGetPromise(\r\n                id,\r\n                timestamp,\r\n                args\r\n              );\r\n            },\r\n          };\r\n        });\r\n        return { ...prev, [id]: n };\r\n      });\r\n      return wrappedFunctions[id] as (...args: ArgsType) => Promise<ReturnType>;\r\n    },\r\n    [registeredFunctions, abortControllers, wrappedFunctions]\r\n  );\r\n\r\n  const registerUnabortable = useCallback(\r\n    <ArgsType extends any[], ReturnType>(\r\n      id: string,\r\n      f: (...args: ArgsType) => Promise<ReturnType>,\r\n      config: ElvisDisplayConfig\r\n    ): ((...args: ArgsType) => Promise<ReturnType>) => {\r\n      const abortable = \"not-abortable\" as const;\r\n      setRegisteredFunctions((prev) => {\r\n        if (identicalAsyncFunctionRegistered(id, f, config, abortable, prev)) {\r\n          return prev;\r\n        }\r\n        const timestamp = Date.now();\r\n        const p = prev[id];\r\n        const isNew = !p;\r\n        const n = isNew\r\n          ? {\r\n              id,\r\n              versionTimestamp: timestamp,\r\n              callback: f,\r\n              abortable,\r\n              config,\r\n            }\r\n          : {\r\n              ...p,\r\n              versionTimestamp: timestamp,\r\n              callback: f,\r\n              abortable,\r\n              config,\r\n            };\r\n        setWrappedFunctions((prev) => {\r\n          return {\r\n            ...prev,\r\n            [id]: async (...args: any) => {\r\n              return await createFunctionExecutionRequestAndGetPromise(\r\n                id,\r\n                timestamp,\r\n                args\r\n              );\r\n            },\r\n          };\r\n        });\r\n        return { ...prev, [id]: n };\r\n      });\r\n      return wrappedFunctions[id] as (...args: ArgsType) => Promise<ReturnType>;\r\n    },\r\n    [registeredFunctions, abortControllers, wrappedFunctions]\r\n  );\r\n\r\n  //! USER FACING FUNCTIONS\r\n\r\n  const ufRegisterAbortable = useCallback(\r\n    <ArgsType extends any[], ReturnType>(\r\n      identifier: string,\r\n      f_unwrapped: (\r\n        abortController: AbortController,\r\n        ...args: ArgsType\r\n      ) => Promise<ReturnType>,\r\n      config: ElvisDisplayConfig\r\n    ) => {\r\n      return useRegisterAsyncFunctionAbortable(\r\n        identifier,\r\n        f_unwrapped,\r\n        config,\r\n        registerAbortable\r\n      );\r\n    },\r\n    [registerAbortable]\r\n  );\r\n  const ufRegisterUnabortable = useCallback(\r\n    <ArgsType extends any[], ReturnType>(\r\n      identifier: string,\r\n      f_unwrapped: (...args: ArgsType) => Promise<ReturnType>,\r\n      config: ElvisDisplayConfig\r\n    ) => {\r\n      return useRegisterAsyncFunction(\r\n        identifier,\r\n        f_unwrapped,\r\n        config,\r\n        registerUnabortable\r\n      );\r\n    },\r\n    [registerUnabortable]\r\n  );\r\n\r\n  const getAbortController = useCallback(\r\n    (id: string) => {\r\n      return abortControllers[id];\r\n    },\r\n    [abortControllers]\r\n  );\r\n\r\n  function displayErrorDefault() {\r\n    return useErrorDisplaySetup(\"\", (c: ErrorDisplayer) =>\r\n      setDefaultErrorDisplayer({ ...c })\r\n    );\r\n  }\r\n  function displayErrorHandle(id: string) {\r\n    return useErrorDisplaySetup(id, (c: ErrorDisplayer) => {\r\n      setErrorDisplayers((prev) => {\r\n        return [...prev, { ...c }];\r\n      });\r\n    });\r\n  }\r\n  function displayLoadingDefault(\r\n    durationOfCancelledState: number,\r\n    durationOfSuccessState: number\r\n  ) {\r\n    return useLoadingDisplaySetup(\r\n      \"\",\r\n      registerDefaultLoadingDisplayer,\r\n      durationOfCancelledState,\r\n      durationOfSuccessState\r\n    );\r\n  }\r\n  function displayLoadingHandle(\r\n    id: string,\r\n    durationOfCancelledState: number,\r\n    durationOfSuccessState: number\r\n  ) {\r\n    return useLoadingDisplaySetup(\r\n      id,\r\n      registerLoadingDisplayer,\r\n      durationOfCancelledState,\r\n      durationOfSuccessState\r\n    );\r\n  }\r\n  return (\r\n    <ElvisContext.Provider\r\n      value={{\r\n        async: {\r\n          wrappedFunctions: wrappedFunctions,\r\n          register: ufRegisterUnabortable,\r\n          abortable: {\r\n            register: ufRegisterAbortable,\r\n            getAbortController,\r\n          },\r\n        },\r\n        display: {\r\n          error: {\r\n            handle: displayErrorHandle,\r\n            default: displayErrorDefault,\r\n          },\r\n          loading: {\r\n            handle: displayLoadingHandle,\r\n            default: displayLoadingDefault,\r\n          },\r\n        },\r\n      }}\r\n    >\r\n      {children}\r\n    </ElvisContext.Provider>\r\n  );\r\n};\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nexport function deepOverwrite(obj1: any, ...objects: any[]) {\r\n  for (const obj of objects) {\r\n    for (let k in obj) {\r\n      let vs = obj[k],\r\n        vt = obj1[k];\r\n      if (Object(vs) == vs && Object(vt) === vt) {\r\n        obj1[k] = deepOverwrite(vt, vs);\r\n        continue;\r\n      }\r\n      obj1[k] = obj[k];\r\n    }\r\n  }\r\n  return obj1;\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport React, {\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  useCallback,\r\n  useRef,\r\n} from \"react\";\r\nimport { deepOverwrite } from \"../../helpers/deepOverwrite\";\r\n\r\ninterface CustomizableButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  hoverStyle?: React.CSSProperties;\r\n}\r\nconst CustomizableButton: React.FunctionComponent<CustomizableButtonProps> = (\r\n  props\r\n) => {\r\n  const [s, setS] = useState<React.CSSProperties | undefined>(props.style);\r\n  const { hoverStyle, style, children, ...passThroughProps } = props;\r\n  return (\r\n    <button\r\n      {...passThroughProps}\r\n      style={s}\r\n      onMouseEnter={(e) => {\r\n        setS(deepOverwrite({ ...props.style }, { ...props.hoverStyle }));\r\n        props.onMouseEnter ? props.onMouseEnter(e) : null;\r\n      }}\r\n      onMouseLeave={(e) => {\r\n        setS(props.style);\r\n        props.onMouseLeave ? props.onMouseLeave(e) : null;\r\n      }}\r\n    >\r\n      {props.children}\r\n    </button>\r\n  );\r\n};\r\nexport default CustomizableButton;\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport React from \"react\";\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: string;\r\n  color?: string;\r\n}\r\nconst LoadingSpinner: React.FunctionComponent<LoadingSpinnerProps> = ({\r\n  size,\r\n  color,\r\n}) => {\r\n  if (!color) {\r\n    color = \"white\";\r\n  }\r\n  return (\r\n    <span\r\n      style={{\r\n        fontSize: size || \"1em\",\r\n        verticalAlign: \"middle\",\r\n      }}\r\n    >\r\n      <style\r\n        dangerouslySetInnerHTML={{\r\n          __html: `.elvis-loading-spinner {\r\n  display: inline-block;\r\n  width: 2.5em;\r\n  height: 2.5em;\r\n}\r\n.elvis-loading-spinner:after {\r\n  content: \" \";\r\n  display: block;\r\n  width: 2.5em;\r\n  height: 2.5em;\r\n  margin: 0.2em;\r\n  border-radius: 50%;\r\n  border: 0.3em solid ${color};\r\n  animation: elvis-loading-spinner 1.0s linear infinite;\r\n  border-color: ${color} transparent ${color} transparent;\r\n}\r\n@keyframes elvis-loading-spinner {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}`,\r\n        }}\r\n      />\r\n      <div className=\"elvis-loading-spinner\"></div>\r\n    </span>\r\n  );\r\n};\r\nexport default LoadingSpinner;\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport { ElvisContext } from \"..\";\r\n\r\nexport function useElvis() {\r\n  return useContext(ElvisContext);\r\n}\r\n","/**MIT License\r\n\r\nCopyright (c) 2024 Sheldon Frith\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n\r\nFor more information and to contribute to this project, visit:\r\nhttps://github.com/Sheldonfrith/react-elvis\r\n*/\r\nimport React, { ReactNode, useCallback, useEffect, useState } from \"react\";\r\n\r\nimport CustomizableButton from \"./CustomizableButton\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nimport { useElvis } from \"../../hooks/useElvis\";\r\nconst defaultProps: ElvisDefaultProps = {\r\n  cancelledStatusDuration_ms: 500,\r\n  successStatusDuration_ms: 500,\r\n  colors: {\r\n    neutral: \"gray\",\r\n    good: \"green\",\r\n    bad: \"red\",\r\n    background: \"black\",\r\n    text: \"white\",\r\n    semiTransparentText: \"rgba(255, 255, 255, 0.5)\",\r\n  },\r\n  hoverColors: {\r\n    neutral: \"rgba(128, 128, 128, 0.5)\",\r\n    good: \"rgba(0, 255, 0, 0.5)\",\r\n    bad: \"rgba(255, 0, 0, 0.5)\",\r\n    background: \"rgb(20,20,20)\",\r\n    text: \"white\",\r\n    semiTransparentText: \"rgba(255, 255, 255, 0.5)\",\r\n  },\r\n  text: {\r\n    ignore: \"Ignore\",\r\n    cancel: \"Cancel\",\r\n    reload: \"Reload\",\r\n  },\r\n};\r\n\r\ninterface ElvisDefaultColors {\r\n  neutral: string;\r\n  good: string;\r\n  bad: string;\r\n  background: string;\r\n  text: string;\r\n  semiTransparentText: string;\r\n}\r\ninterface ElvisDefaultFontFamily {\r\n  title: string;\r\n  body: string;\r\n}\r\ninterface ElvisDefaultText {\r\n  ignore: string;\r\n  cancel: string;\r\n  reload: string;\r\n}\r\n\r\ninterface ElvisDefaultProps {\r\n  cancelledStatusDuration_ms: number;\r\n  successStatusDuration_ms: number;\r\n  colors: ElvisDefaultColors;\r\n  hoverColors: ElvisDefaultColors;\r\n  text: ElvisDefaultText;\r\n}\r\n\r\ninterface OptionalElvisDefaultProps {\r\n  cancelledStatusDuration_ms?: number;\r\n  successStatusDuration_ms?: number;\r\n  colors?: Partial<ElvisDefaultColors>;\r\n  fontFamily?: Partial<ElvisDefaultFontFamily>;\r\n  text?: Partial<ElvisDefaultText>;\r\n}\r\n\r\nexport const ElvisDefault: React.FC<OptionalElvisDefaultProps> = (props) => {\r\n  const p: ElvisDefaultProps = { ...defaultProps };\r\n  p.colors = { ...p.colors, ...props.colors };\r\n  p.hoverColors = { ...p.hoverColors, ...props.colors };\r\n  p.text = { ...p.text, ...props.text };\r\n\r\n  const [isOpen, setIsOpen] = useState<boolean>(false);\r\n  const elvis = useElvis();\r\n  const { error, clearError, residualError } = elvis.display.error.default();\r\n  const { loading, cancelled, success, abortController } =\r\n    elvis.display.loading.default(\r\n      p.cancelledStatusDuration_ms,\r\n      p.successStatusDuration_ms\r\n    );\r\n\r\n  // control isOpen\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      if (error || loading || cancelled || success) {\r\n        setIsOpen(true);\r\n      }\r\n    }\r\n    if (isOpen) {\r\n      if (!error && !loading && !cancelled && !success) {\r\n        setIsOpen(false);\r\n      }\r\n    }\r\n  }, [isOpen, error, clearError, loading, cancelled, success]);\r\n  const getTitle = useCallback(() => {\r\n    if (error) {\r\n      return error.title;\r\n    }\r\n    if (loading) {\r\n      return loading.title;\r\n    }\r\n    if (cancelled) {\r\n      return cancelled.title;\r\n    }\r\n    return success?.title;\r\n  }, [error, loading, cancelled, success]);\r\n  const getBody = useCallback(() => {\r\n    if (error) {\r\n      return error.message;\r\n    }\r\n    if (loading) {\r\n      return (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <LoadingSpinner size=\"1em\" />\r\n          <div\r\n            style={{\r\n              width: \"10%\",\r\n            }}\r\n          ></div>\r\n          {loading.message}\r\n        </div>\r\n      );\r\n    }\r\n    if (cancelled) {\r\n      return cancelled.message;\r\n    }\r\n    return success?.message;\r\n  }, [error, loading, cancelled, success]);\r\n  const getActions = useCallback(() => {\r\n    if (error) {\r\n      return (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          {error.canIgnore ? (\r\n            <CustomizableButton\r\n              key=\"ignore\"\r\n              style={{\r\n                backgroundColor: p.colors.neutral,\r\n                color: p.colors.text,\r\n                padding: \"0.5rem\",\r\n                borderRadius: \"0.375rem\",\r\n                margin: \"0.5rem\",\r\n              }}\r\n              hoverStyle={{\r\n                backgroundColor: p.hoverColors.neutral,\r\n                color: p.hoverColors.text,\r\n              }}\r\n              onClick={() => {\r\n                clearError();\r\n              }}\r\n            >\r\n              {p.text.ignore}\r\n            </CustomizableButton>\r\n          ) : null}\r\n          <CustomizableButton\r\n            key=\"reload\"\r\n            style={{\r\n              backgroundColor: p.colors.bad,\r\n              color: p.colors.text,\r\n              padding: \"0.5rem\",\r\n              borderRadius: \"0.375rem\",\r\n              margin: \"0.5rem\",\r\n            }}\r\n            hoverStyle={{\r\n              backgroundColor: p.hoverColors.bad,\r\n              color: p.hoverColors.text,\r\n            }}\r\n            onClick={() => {\r\n              window.location.reload();\r\n            }}\r\n          >\r\n            {p.text.reload}\r\n          </CustomizableButton>\r\n        </div>\r\n      );\r\n    } else if (loading && abortController) {\r\n      return (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          <CustomizableButton\r\n            style={{\r\n              backgroundColor: p.colors.bad,\r\n              color: p.colors.text,\r\n              padding: \"0.5rem\",\r\n              borderRadius: \"0.375rem\",\r\n              margin: \"0.5rem\",\r\n            }}\r\n            hoverStyle={{\r\n              backgroundColor: p.hoverColors.bad,\r\n              color: p.hoverColors.text,\r\n            }}\r\n            onClick={() => {\r\n              abortController.abort();\r\n            }}\r\n          >\r\n            {p.text.cancel}\r\n          </CustomizableButton>\r\n        </div>\r\n      );\r\n    } else {\r\n    }\r\n  }, [error, loading, cancelled, success, abortController]);\r\n  if (!isOpen) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundColor: p.colors.semiTransparentText,\r\n        color: p.colors.text,\r\n        position: \"fixed\",\r\n        inset: \"0px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        backdropFilter: \"blur(8px)\",\r\n        justifyContent: \"center\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          backgroundColor: p.colors.background,\r\n          padding: \"2rem\",\r\n          borderRadius: \"0.25rem\",\r\n          boxShadow: \"0 25px 50px -12px rgba(0, 0, 0, 0.25)\",\r\n          overflow: \"auto\",\r\n          position: \"relative\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"around\",\r\n          maxWidth: \"48rem\",\r\n          minWidth: \"50vw\",\r\n          minHeight: \"25vh\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            minHeight: \"18vh\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          <h1\r\n            style={{\r\n              fontSize: \"2.25rem\",\r\n              lineHeight: \"2.5rem\",\r\n              fontWeight: 700,\r\n              textAlign: \"center\",\r\n              marginBottom: \"1rem\",\r\n            }}\r\n          >\r\n            {getTitle()}\r\n          </h1>\r\n          <p>{getBody()}</p>\r\n          <div style={{ display: \"flex\", flexDirection: \"row\", width: \"100%\" }}>\r\n            {getActions()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["useContext","useState","useEffect","useCallback","useRef"],"mappings":"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"}